{% extends "base.html" %}

{% block title %}Cover Letter for {{ job[1] }}{% endblock %}

{% block content %}
<h2>Generate Cover Letter</h2>
<p>Position: {{ job[1] }} at {{ job[2] }}</p>

<form method="POST">
    <input type="submit" value="Generate AI Cover Letter">
</form>

{% if letter %}
    <h3>Generated Cover Letter:</h3>
    <pre id="letter-box" class="cover-letter-box">{{ letter }}</pre>
    <button onclick="copyToClipboard()">Copy</button>
    <span id="copy-msg"></span>
{% endif %}
<script>
    function copyToClipboard() {
        const text = document.getElementById("letter-box").innerText;
        navigator.clipboard.writeText(text);
        document.getElementById("copy-msg").textContent = "Copied!";
        setTimeout(() => {
            document.getElementById("copy-msg").textContent = "";
        }, 2000);
    }
</script>
{% endblock %}